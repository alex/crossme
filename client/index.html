<head>
  <title>CrossMe(teor)</title>
</head>

<body>
  {{> selector }}
  {{> upload }}
  {{> puzzle }}
  {{> gaq}}
</body>

<template name='upload'>
  <form action='#' id='uploadform'>
    <div>
      Or upload a new puzzle: <input id='puzfile' type="file" value="puz" />
      <button> Upload </button>
    </div>
  </form>
</template>

<template name='selector'>
  <div id='selector'>
    <label for='switchpuzzle'>Puzzle:</label>
    <select id='switchpuzzle'>
      {{#each puzzles}}
      <option value="{{_id}}">{{title}}</option>
      {{/each}}
    </select>
    <button>New Game</button>
  </div>
</template>

<template name='puzzle'>
  {{#if show}}
  <div id='puzzle'>
    {{#with puzzle}}
    {{> metadata}}
    {{/with}}
    {{> currentclue }}
    <div id='puzzlegrid'>
      {{#each rows}}
      {{> row }}
      {{/each}}
    </div>
    <div id='clues'>
      {{> clues}}
    </div>
  </div>
  {{/if}}
</template>

<template name='metadata'>
  <div id='details'>
    <div class='title'>
      <span class='label'>Title:</span>
      <span class='value'>{{title}}</span>
    </div>
    <div class='author'>
      <span class='label'>By:</span>
      <span class='value'>{{author}}</span>
    </div>
  </div>
</template>

<template name='currentclue'>
  {{#with clue}}
  <div id='theclue'>
    <span class='label'>
      <span class='number'>{{number}}</span>
      <span class='direction'>{{direction}}</span>
    </span>
    <span class='text'>{{text}}</span>
    <div class='clear'></div>
  </div>
  {{/with}}
</template>

<template name='row'>
  <div class='row'>
    {{#each cells}}
    {{> cell }}
    {{/each}}
  </div>
</template>

<template name='cell'>
  <div class='cell {{css_class}}'>
    <div class='cellbody'>
      {{#if number}}
      <div class='numberlabel'>
        {{ number }}
      </div>
      {{/if}}
      <div class='fill'>
        {{fill}}
      </div>
    </div>
  </div>
</template>

<template name='clues'>
  <div class='section across'>
    <div class='title'> Across </div>
    <div class='cluelist'>
      {{#each across_clues}}
      {{> clue}}
      {{/each}}
    </div>
  </div>
  <div class='section down'>
    <div class='title'> Down </div>
    <div class='cluelist'>
      {{#each down_clues}}
      {{> clue}}
      {{/each}}
    </div>
  </div>
</template>

<template name='clue'>
  <div class='clue {{css_class}}'>
    {{number}}. {{text}}
  </div>
</template>

<template name='gaq'>
  {{#constant}}
  {{#if show}}
  {{#with settings}}
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '{{id}}', '{{domain}}');
  ga('send', 'pageview');

</script>
  {{/with}}
  {{/if}}
  {{/constant}}
</template>
